<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>011单例模式-登入框.html</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		#btn{
			width: 100px;
			height: 50px;
		}
		#login{
			width: 600px;
			height: 600px;
			background-color: #ccc;
			margin: 0 auto;
			/* display: none; */
		}
		#mask{
			width: 300px;
			height: 300px;
			background-color: blue;
			position: absolute;
			top: 200px;
			left: 0;
		}
	</style>
</head>
<body>
	<input type="button" id = "btn" value = "测试">
	<!-- <div id="login"></div> -->
</body>
<script>

	/*(function(w){
		var login = null;
		if(!login){
			var oDiv = document.createElement('div');
			oDiv.id = 'login';
			document.body.appendChild(oDiv);
			login = oDiv;
		}
		return login;

	})(window);*/

	function createlogin(){
			var oDiv = document.createElement('div');
			oDiv.id = 'login';
			document.body.appendChild(oDiv);
			return oDiv;
			//login = oDiv;
	}
	function createmask(){
			var oDiv = document.createElement('div');
			oDiv.id = 'mask';
			document.body.appendChild(oDiv);
			return oDiv;
	}
	function signle(fn){//创建唯一实例,优势:函数生成实例,且生成的实例由传进来的参数fn决定
			var obj = null;
			return function(){//返回一个函数，返回的结果由传入的fn决定
				if(!obj){
					obj = fn();//
				}
				return obj;
			}
			/*if(!obj){
				var oDiv = document.createElement('div');
				oDiv.id = 'login';
				document.body.appendChild(oDiv);
				obj = oDiv;	
			}
			return obj;*/
	}
	var createloginer = signle(createlogin);//调用signle，传入createlogin函数
	var createmasker = signle(createmask);
	//执行createloginer，相当于返回obj;
	var oBtn = document.getElementById('btn');
	//var oDiv = document.getElementById('login');
	oBtn.onclick = function(){
		//oDiv.style.display = 'block';
		//var oDiv = document.createElement('div');
		//oDiv.id = 'login';
		//document.body.appendChild(oDiv);
		//new login();
		createloginer();
		createmasker();
	}

</script>
</html>